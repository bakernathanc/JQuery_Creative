<html>
<head>
  <Title>Google Book Search</title>

</head>
<script
  src="http://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous">
</script>

<script>
$(document).ready(function() {

  $("#bookButton").click(function(e){
    var value = $("#bookInput").val();
    console.log(value);
    e.preventDefault();
    value = value.replace(" ", "%20")

    var myurl = "https://www.googleapis.com/books/v1/volumes?q="
    myurl += value
    myurl += "&filter=ebooks&orderBy=newest&printType=all&projection=full"
    console.log(myurl)
    $.ajax({
      url : myurl,
      dataType : "json",
      success : function(parsed_json) {
        console.log(parsed_json)
        var everything="<ul>";
        var title_list =[]
        var bookLink_list=[]
        var author_list=[]
        var snippet=[]
        var image_link_list=[]
        parsed_json.items.forEach(function(val, ind, arr) {
          if(val &&val.volumeInfo && val.volumeInfo.title ){
            title_list.push(val.volumeInfo.title);
            console.log(title_list[0])
          }
          else{
            title_list.push("No Title Given")
          }
          if(val && val.volumeInfo && val.volumeInfo.infoLink){
            bookLink_list.push(val.volumeInfo.infoLink);
          }
          else{

          }
          if(val && val.volumeInfo && val.volumeInfo.authors){
            author_list.push(val.volumeInfo.authors);
          }
          else{
            author_list.push("No author listed")
          }
          if(val && val.searchInfo && val.searchInfo.textSnippet){
            snippet.push(val.searchInfo.textSnippet);
          }
          else{
            snippet.push("No snippet given")
          }
          if(val && val.volumeInfo && val.volumeInfo.imageLinks&&val.volumeInfo.imageLinks.smallThumbnail){
            image_link_list.push(val.volumeInfo.imageLinks.smallThumbnail);
          }
          else{

          }
        })

        for(i=0;i<title_list.length;i++){
          console.log(i)
          everything+="<li> <a href="+ bookLink_list[i] +">"+title_list[i]+"</a>";
          everything += "<li>Author(s): " + author_list[i];
          everything += "<li>Quick snippet: " + snippet[i];
          everything += "<li><img src="+image_link_list[i]+">";
          everything += "</ul>";

        }
        console.log(everything)
        everything +="</ul>";
        $("#bookResults").html(everything);
      }//json success
    });//ajax
  });//button
});//doc ready
</script>
<body>
<form>
  <p>Enter a book or key phrase: <input type="text" id="bookInput" value="">
  <input id="bookButton" type="submit" value="Submit"></p>
</form>
<div id="bookResults">No Book results yet</div>
</body>
</html>
