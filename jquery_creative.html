<html>
<head>
  <Title>Google Book Search</title>
  <link rel="stylesheet" type="text/css" href="jquery_creative.css">


</head>
<script
  src="http://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous">
</script>

<script>
$(document).ready(function() {

  $("#bookButton").click(function(e){
    var value = $("#bookInput").val();
    console.log("I'm in the thingy!!")
    console.log(value);
    e.preventDefault();
    value = value.replace(" ", "%20")

    var myurl = "https://www.googleapis.com/books/v1/volumes?q="
    myurl += value
    myurl += "&filter=ebooks&orderBy=newest&printType=all&projection=full"
    console.log(myurl)
    $.ajax({
      url : myurl,
      dataType : "json",
      success : function(parsed_json) {
        console.log(parsed_json)
        console.log("I'm inside!")
        everything="<ul>";
        $.each(parsed_json['items'],function(index){
          var title = parsed_json['items'][index]['volumeInfo']['title'];
          var link = parsed_json['items'][index]['volumeInfo']['infoLink'];
          var author = parsed_json['items'][index]['volumeInfo']['authors']
          var snippet = parsed_json['items'][index]['searchInfo']['textSnippet']
          var image_link = parsed_json['items'][index]['volumeInfo']['imageLinks']['smallThumbnail']
          image_link = "\""+image_link + "\""
          
          everything+="<li class = 'inner'> <a href="+ link +">"+title+"</a>";
          everything +="<ul>"
          everything += "<li>Author(s): " + author + "\n";
          everything += "<li>Quick snippet: ''" + snippet + "'";
          everything += "<li><img href=image_link>"
          everything += "</ul>";
        });//function
        everything +="</ul>";
        $("#bookResults").html(everything);
      }//json success
    });//ajax
  });//button
});//doc ready
</script>
<body>
<div id = overlay>
    <div id = center>
    <h1>Google Book Search</h1>
      <div id = searchDiv>
        <form id = searchForm >
          <p>Enter a book or key phrase: <input type="text" id="bookInput" value="Harry Potter">
          <input id="bookButton" type="submit" value="Submit"></p>
        </form>
      </div>

    <div id="bookResults"></div>
  </div>
</div>
</body>
</html>
